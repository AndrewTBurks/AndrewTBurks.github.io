<!DOCTYPE html>
<meta charset="utf-8">
<style>

* {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-weight: bold;  
}

.arc text {
  font: 10px sans-serif;
  text-anchor: middle;
}

.arc path {
  stroke: lightgray;
  stroke-width: 2;
}

.arc path:hover {
  stroke: yellow;
  stroke-width: 3;  
}

.arc2 text {
  font: 10px sans-serif;
  text-anchor: middle;
}

.arc2 path {
  stroke: lightgray;
  stroke-width: 2;
}

.arc2 path:hover {
  stroke: yellow;
  stroke-width: 3;  
}

</style>
<body>
  <iframe src="navbar.html?wmode=opaque" class="navbar" width=100% height=50 frameBorder="0" scrolling="no"></iframe>
  <p class = "colorInfo">Color:</p>
  <p class = "colorPick">Picked:</p>
</body>

<script src="//d3js.org/d3.v3.min.js"></script>
<script src="cubehelix.js"></script>
<script>

var len = 50;
var data = new Array(len);

for(var i = 0; i < data.length; i++)
{
  data[i] = i;
}

var width = 800,
    height = 500,
    radius = Math.min(width, height) / 2;

var currRotation = 180;
var prevScale = 1;

var scroll = d3.behavior.zoom()
    .on("zoom", scrolled);

var cDef = d3.scale.cubehelix()
  .domain([0, len]);

var arc = d3.svg.arc()
    .outerRadius(radius - 10)
    .innerRadius(radius - 60)
    .padAngle(0.02);

var innerArc = d3.svg.arc()
    .outerRadius(radius - 75)
    .innerRadius(radius - 100)
    .padAngle(0.02);

var pie = d3.layout.pie()
    .sort(null)
    .value(function(d) { return Math.PI; });

var info = d3.select(".colorInfo");
var picked = d3.select(".colorPick");

var svg = d3.select("body").append("svg")
    .call(scroll)
    .attr("width", width)
    .attr("height", height);

var sample = svg.append("rect")
    .attr("x", 10)
    .attr("y", 10)
    .attr("width", 100)
    .attr("height", 100)
    .style("fill", "black")
    .style("stroke", "yellow")
    .style("stroke-width", "4px");

var bg = svg.append("circle")
    .attr("r", radius)
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
    .style("fill", "#222");
  
svg.append("circle")
    .attr("r", 10)
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
    .style("fill", "slategray");

var g = svg.selectAll(".arc")
    .data(pie(data))
  .enter().append("g")
    .attr("class", "arc")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")rotate(180)");

g.append("path")
    .attr("d", arc)
    .style("fill", function(d) { return cDef(d.data); })
    .on("mouseover", function(d,i) {
      info.text("Color: " + cDef(i));
    })
    .on("click", function(d, i) {
      sample.style("fill", cDef(i));
      picked.text("Picked: " + cDef(i));
    });

var g2 = svg.selectAll(".arc2")
    .data(pie(data))
  .enter().append("g")
    .attr("class", "arc2")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");


g2.append("path")
    .attr("d", innerArc)
    .style("fill", function(d) { return cDef(d.data); })
    .on("mouseover", function(d,i) {
      info.text("Color: " + cDef(i));
    })
    .on("click", function(d, i) {
      sample.style("fill", cDef(i));
      picked.text("Picked: " + cDef(i));
    });

function scrolled() {
  currRotation = (prevScale > d3.event.scale) ? (currRotation + 9)%360 : (currRotation - 9)%360;
  prevScale = d3.event.scale;
  g.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")rotate(" + currRotation + ")");
}

</script>

